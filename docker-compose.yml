services:
  api:
    build:
      context: .
      dockerfile: server/Dockerfile
    environment:
      PORT: "3020"
      BLINK_DATA_DIR: /data
    volumes:
      - ./server/data:/data
    ports:
      - "3020:3020"

  web:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        VITE_TARGET: web
        VITE_API_BASE: /api
    depends_on:
      - api
    ports:
      - "8080:80"
